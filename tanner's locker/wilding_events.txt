#Wildling Horde modifiers
character_event = {
	id = wildling.1

	only_playable = yes
	hide_window = yes
	
	trigger = {
		culture_group = free_folk
	}
	
	immediate = {
		set_character_flag = wildling_horde_modifier
		character_event = { id = wildling.2 days = 1 }
	}
	
	option = {
		name = OK
	}
}
character_event = {
	id = wildling.2

	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		has_character_flag = wildling_horde_modifier
	}
	
	immediate = {
		remove_character_modifier = wildling_horde_20
		remove_character_modifier = wildling_horde_18
		remove_character_modifier = wildling_horde_16
		remove_character_modifier = wildling_horde_14
		remove_character_modifier = wildling_horde_12
		remove_character_modifier = wildling_horde_10
		remove_character_modifier = wildling_horde_8
		remove_character_modifier = wildling_horde_6
		remove_character_modifier = wildling_horde_4
		remove_character_modifier = wildling_horde_3
		remove_character_modifier = wildling_horde_2
		remove_character_modifier = wildling_horde_1
		if = {
			limit = {
				OR = {
					NOT = { culture_group = free_folk }
					NOT = { prestige = 100 }
					is_ruler = no
				}
			}
			clr_character_flag = wildling_horde_modifier			
			break = yes
		}
		character_event = { id = wildling.2 days = 60 } #check modifier bi-monthly		
		if = {
			limit = { prestige = 2000 }
			add_character_modifier = { name = wildling_horde_20 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 1800 }
			add_character_modifier = { name = wildling_horde_18 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 1600 }
			add_character_modifier = { name = wildling_horde_16 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 1400 }
			add_character_modifier = { name = wildling_horde_14 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 1200 }
			add_character_modifier = { name = wildling_horde_12 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 1000 }
			add_character_modifier = { name = wildling_horde_10 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 800 }
			add_character_modifier = { name = wildling_horde_8 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 600 }
			add_character_modifier = { name = wildling_horde_6 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 400 }
			add_character_modifier = { name = wildling_horde_4 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 300 }
			add_character_modifier = { name = wildling_horde_3 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 200 }
			add_character_modifier = { name = wildling_horde_2 duration = -1 }
			break = yes
		}
		if = {
			limit = { prestige = 100 }
			add_character_modifier = { name = wildling_horde_1 duration = -1 }
			break = yes
		}
	}
	
	option = {
		name = OK
	}
}
# Force the AI to consider invasions
character_event = {
	id = wildling.3
	desc = "Hey, AI, you want to invade this person?"
	
	is_triggered_only = yes
	only_independent = yes
	ai = yes
	min_age = 16
	capable_only = yes
	war = no
	
	trigger = {
		culture_group = free_folk
		demesne_size = 1
		wealth = 0
		
		OR = {
			NOT = { has_global_flag = war_cooldown_period } 
			had_global_flag = { flag = war_cooldown_period days = 25 }
		}	
	}
		
	immediate = {
		# Opinion flag a target
		random_independent_ruler = {
			limit = {
				#NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_enforced_truce } }
				NOT = { reverse_has_truce = ROOT }
				OR = {
					ROOT = { higher_tier_than = COUNT }
				}
				any_realm_province = {
					has_owner = yes
					owner = {
						OR = {
							character = PREVPREV
							is_liege_or_above = PREVPREV
						}
					}
					any_neighbor_province = {
						has_owner = yes
						owner = {
							OR = {
								character = ROOT
								is_liege_or_above = ROOT
							}
						}
					}
				}
				any_demesne_title = {
					OR = {
						higher_tier_than = DUKE
						AND = {
							tier = DUKE
							holder_scope = { tier = DUKE }
						}
						AND = {
							tier = COUNT
							holder_scope = { tier = COUNT }
						}
					}
					controls_religion = no	
				}
				
				#Target considerations
				OR = {
					NOT = { relative_power = { who = ROOT power = 1.75 } }
					AND = {
						war = yes
						NOT = { relative_power = { who = ROOT power = 3 } }
					}
				}	
				OR = {
					NOT = { reverse_opinion = { who = ROOT value = 40 } } #Don't target people they like
					ROOT = { 
						OR = {
							trait = ambitious
							trait = ruthless
						}
					}
				}
				OR = { #Have to dislike close family to attack them
					NOT = { reverse_opinion = { who = ROOT value = -15 } } 
					NOT = {
						OR = {
							is_married = ROOT
							any_child = { character = ROOT }
							father = { character = ROOT }
							mother = { character = ROOT }
						}
					}
				}
			}
			save_event_target_as = opinion_invasion_target_evaluation
		}
	}
	
	option = {
		name = "Let's do it!"
		ai_chance = {
			factor = 200
			modifier = {
				factor = 4
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 0.5
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 0.5
				trait = honorable
			}
			modifier = {
				factor = 2
				event_target:opinion_invasion_target_evaluation = {
					NOT = {
						relative_power = {
							who = ROOT
							power = 0.25
						}
					}	
				}
			}
			modifier = {
				factor = 2
				event_target:opinion_invasion_target_evaluation = {
					NOT = {
						relative_power = {
							who = ROOT
							power = 0.1
						}
					}	
				}
			}
		}
		event_target:opinion_invasion_target_evaluation = {
			random_demesne_title = {
				limit = {
					OR = {
						higher_tier_than = DUKE
						AND = {
							tier = DUKE
							holder_scope = { tier = DUKE }
						}
						AND = {
							tier = COUNT
							holder_scope = { tier = COUNT }
						}
					}
					controls_religion = no
				}	
				reverse_war = {
					target = ROOT
					casus_belli = invasion
				}
			}
		}
	}
	
	option = {
		name = "Let's not do it!"
		ai_chance = {
			factor = 50
		}
	}
}