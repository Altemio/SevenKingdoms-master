
# Our first casus belli allows conquest of individual counties from neighbouring equal-tier rulers.
# Our second casus belli allows conquest of duchies from neighbouring equal tier rulers, but at greater cost.

# Currently you can only use the casus belli against other religions, ie seven against old gods.

# ROOT is the attacker
# FROM is the target

tsk_bronzemen_vale = {
    name = CB_NAME_TSK_BRONZEMEN_VALE
    war_name = WAR_NAME_TSK_BRONZEMEN_VALE
    sprite = 8
    truce_days = 365
    hostile_against_others = yes
    is_permanent = yes
    can_ask_to_join_war = yes
    check_de_jure_tier = KING # this scans all de jure kingdoms for the counties which are held by or vassals(or below) of selected character. Only valid if is_permanent = yes
    allow_whitepeace = no
    allowed_to_target_tributaries = no
    # allowed_to_target_suzerains = no
    
    can_use = {
        always = no
    }
    
    can_use_title = {
        always = no
    }
    
    on_success = {
        any_attacker = {
            limit = { character = ROOT }
            participation_scaled_prestige = 500
        }
        any_attacker = {
            limit = { NOT = { character = ROOT } }
            hidden_tooltip = { participation_scaled_prestige = 500 }
        }
        FROM = {
            prestige = -500
            imprison = ROOT
            hidden_tooltip = {
				if = {
				  limit = {
					ROOT = { has_character_flag = andar_royce  }
				  }
				  ROOT = { character_event = { id = DEAD.6 days = 10 tooltip = "EVTTOOLTIP8161" } }
				}
                opinion = {
                    modifier = opinion_subjugated 
                    who = ROOT
                }
                any_vassal = {
                    opinion = {
                        modifier = opinion_subjugated 
                        who = ROOT
                    }
                }
                any_demesne_title = {
                    limit = {
                        higher_tier_than = ROOT
                        NOT = { controls_religion = yes }
                    }
                    ROOT = { grant_title_no_opinion = { target = PREV type = invasion } }
                    add_pressed_claim = PREV
                }
                
                any_demesne_title = {
                    limit = {
                        tier = ROOT
                        NOT = { controls_religion = yes }
                    }
                    ROOT = { grant_title_no_opinion = { target = PREV type = invasion } }
                    add_pressed_claim = PREV
                }

                if = {
                    limit = {
                        NOT = {
                            any_demesne_title = {
                                controls_religion = yes
                            }
                        }
                    }
                    set_defacto_liege = ROOT
                    break = yes
                }
                any_vassal = {
                    set_defacto_liege = ROOT
                }
                any_demesne_title = {
                    limit = {
                        NOT = { controls_religion = yes }
                    }
                    ROOT = {
                        grant_title_no_opinion = { target = PREV type = invasion }
                    }
                }
            }
        }
    }
    
    on_reverse_demand = {
        ROOT = {
            prestige = -500
			imprison = FROM
            transfer_scaled_wealth = {
                to = FROM
                value = 3.0
            }
			hidden_tooltip = {
				if = {
				  limit = {
					FROM = { has_character_flag = osric_the_old  }
				  }
				  FROM = { character_event = { id = DEAD.1 days = 10 tooltip = "EVTTOOLTIP8161" } }
				}
				else_if = {
				  limit = {
					FROM = { has_character_flag = roland_the_bright  }
				  }
				  FROM = { character_event = { id = DEAD.2 days = 70 tooltip = "EVTTOOLTIP8161" } }
				}
				
                opinion = {
                    modifier = opinion_subjugated 
                    who = FROM
                }
                any_vassal = {
                    opinion = {
                        modifier = opinion_subjugated 
                        who = FROM
                    }
                }
                any_demesne_title = {
                    limit = {
                        higher_tier_than = FROM
                        NOT = { controls_religion = yes }
                    }
                    FROM = { grant_title_no_opinion = { target = PREV type = invasion } }
                    add_pressed_claim = PREV
                }
                
                any_demesne_title = {
                    limit = {
                        tier = FROM
                        NOT = { controls_religion = yes }
                    }
                    FROM = { grant_title_no_opinion = { target = PREV type = invasion } }
                    add_pressed_claim = PREV
                }

                if = {
                    limit = {
                        NOT = {
                            any_demesne_title = {
                                controls_religion = yes
                            }
                        }
                    }
                    set_defacto_liege = FROM
                    break = yes
                }
                any_vassal = {
                    set_defacto_liege = FROM
                }
                any_demesne_title = {
                    limit = {
                        NOT = { controls_religion = yes }
                    }
                    FROM = {
                        grant_title_no_opinion = { target = PREV type = invasion }
                    }
                }
            }
        }
        any_defender = {
            limit = { character = FROM }
            participation_scaled_prestige = 500
        }
        any_defender = {
            limit = { NOT = { character = FROM } }
            hidden_tooltip = { participation_scaled_prestige = 200 }
        }
        ROOT = {
            prestige = -250
        }
    }

    attacker_ai_victory_worth = {
        factor = 200
    }
    
    attacker_ai_defeat_worth = {
        factor = 100
    }

    defender_ai_victory_worth = {
        factor = -1 # always accept
    }
    
    defender_ai_defeat_worth = {
        factor = 100
    }
    
    ai_will_do = { 
        factor = 1
    }
}

