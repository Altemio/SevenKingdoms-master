namespace = melt_pot_culture_init

character_event = {
	id = melt_pot_culture_init.0

	is_triggered_only = yes
	hide_window = yes

	trigger = {
		NOT = { has_game_rule = { name = culture_conversion value = disabled } }
		capital_scope = {
			OR = {
				region = world_the_north
				region = world_westerlands
				region = world_the_reach
			}
		}
	}
	
	immediate = {
		any_province = {
			if = {
				limit = {
					region = world_the_north
					religion_group = the_seven_group
					NOT = { culture_group = andal }
				}
				culture = northlander
				owner = {
					culture = northlander
					any_courtier_or_vassal = {
						culture = northlander
					}
				}		
			}
			if = {
				limit = {
					region = world_westerlands
					religion_group = the_seven_group
					NOT = { culture_group = andal }
				}
				culture = andal_westerlander
			}
			if = {
				limit = {
					region = world_the_reach
					religion_group = the_seven_group
					NOT = { culture_group = andal }
				}
				culture = andal_reachman
			}
		}
	}
}

character_event = {
	id = melt_pot_culture_init.1

	#is_triggered_only = yes
	hide_window = yes

	trigger = {
		OR = {
			AND = {
				culture = low_valyrian
				NOT = { dynasty = none }
			}
			AND = {
				culture = high_valyrian
				dynasty = none
				NOT = { has_trait = physician }
			}
			AND = {
				culture = low_valyrian
				dynasty = none
				has_trait = physician
			}
		}
	}
	
	immediate = {
		if = { 
			limit ={
				culture = low_valyrian
				NOT = { dynasty = none }
			}
			culture = high_valyrian
		}
		if = { 
			limit ={
				culture = high_valyrian
				dynasty = none
				NOT = { has_trait = physician }
			}
			culture = low_valyrian
		}
		if = { 
			limit ={
				culture = low_valyrian
				dynasty = none
				has_trait = physician
			}
			culture = high_valyrian
		}
	}
}