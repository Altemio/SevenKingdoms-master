#### Combat Education ####
# Originally written by Godman, rewritten from scratch by Rowan.

namespace = TSK_C_EDU

character_event = {
	id = TSK_C_EDU.1
	desc = EVTDESC_TSK_C_EDU.1
	
	min_age = 6
	max_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
        educator_is_combat_trained = yes
        OR = {
            is_female = no
            ward_is_female_allowed = yes
        }
        # Blockers. If you're the same skill as your educator, you cannot progress.
        NOR = {
            AND = {
                educator_is_not_combat_trained = yes
                is_combat_untrained = yes
            }
            AND = {
                educator_legend = yes
                is_combat_legend_or_lower = yes
            }
            AND = {
                educator_master = yes
                is_combat_master_or_lower = yes
            }
            AND = {
                educator_expert = yes
                is_combat_expert_or_lower = yes
            }
            AND = {
                educator_skilled = yes
                is_combat_skilled_or_lower = yes
            }
            AND = {
                educator_adept = yes
                is_combat_adept_or_lower = yes
            }
            AND = {
                educator_novice = yes
                is_combat_novice = yes
            }
        }
    }
    
    mean_time_to_happen = {
        months = 12
        
        # Educator influence
        modifier = {
            factor = 0.6
            educator_legend = yes
        }
        modifier = {
            factor = 0.7
            educator_master = yes
        }
        modifier = {
            factor = 0.9
            educator_expert = yes
        }
        modifier = {
            factor 1.1
            educator_skilled = yes
        }
        modifier = {
            factor = 1.3
            educator_adept = yes
        }
        modifier = {
            factor = 1.5
            educator_novice = yes
        }
        modifier = {
            factor = 0.95
            educator = { is_trustworthy_trigger = yes }
        }
        modifier = {
            factor = 1.1
            educator = { has_council_position_trigger = yes }
        }
        
        # Ward influence
        modifier = {
            factor = 0.8
            OR = {
                has_evil_trait_trigger = yes
                has_unpleasant_trait_trigger = yes
            }
        }
        modifier = {
            factor = 0.8
            child_personality_martial_trigger = yes
        }
        modifier = {
            factor = 0.8
            is_strong_trigger = yes
        }
        modifier = {
            factor = 0.9
            OR = {
                child_personality_stewardship_trigger = yes
                child_personality_intrigue_trigger = yes
            }
        }
        modifier = {
            factor = 0.9
            self_serving_trigger = yes
        }
        modifier = {
            factor = 0.9
            is_smart_trigger = yes
        }
        modifier = {
            factor = 0.9
            has_virtue_trigger = yes
        }
        modifier = {
            factor = 0.9
            has_attractive_trait_trigger = yes
        }
        modifier = {
            factor = 1.1
            has_pleasant_trait_trigger = yes
        }
        modifier = {
            factor = 1.1
            has_pious_trait_trigger = yes
        }
        modifier = {
            factor = 1.2
            character_is_irrational = yes
        }
        modifier = {
            factor = 1.2
            is_weak_trigger = yes
        }
        modifier = {
            factor = 1.5
            OR = {
                is_dumb_trigger = yes
                has_mental_disorder_trigger = yes
            }
        }
        modifier = {
            factor = 2.0
            OR = {
                has_injury_trigger = yes
                has_minor_disability_trigger = yes
            }
        }
        modifier = {
            factor = 2.0
            has_symptom_trigger = yes
        }
        modifier = {
            factor = 3.0
            has_disease_trigger = yes
        }
        modifier = {
            factor = 3.5
            OR = {
                is_maimed_trigger = yes
                has_severe_disability_trigger = yes
                has_medium_disability_trigger = yes
            }
        }
    }
    
    option = {
		name = EVTOPTA_TSK_C_EDU.1
        
        educator = {
            character_event = { id = TSK_C_EDU.2 }
        }
        
        train_combat_skill = yes
    }
}

## Educator Notification ##
character_event = {
	id = TSK_C_EDU.2
	desc = EVTDESC_TSK_C_EDU.2
	
	is_triggered_only = yes
	
	option = { 
		name = EVTOPTA_TSK_C_EDU.2
	}
}