##Forming the Sunguard##
namespace = sunguard
character_event = {
	id = sunguard.1
	desc = "EVTDESCsunguard.1"
	
	only_independent = yes
	
	trigger = { 
		has_landed_title = e_dorne
		NOT = {
			sunguard = {
				count = 7
			}
		}
		OR = { 
			has_global_flag = sunguard_recruiting
		}
		any_realm_character = {
			is_female = no
			is_married = no
			prisoner = no
			age = 16
			is_ruler = no
			OR = {
				trait = dueling_novice
				trait = dueling_adept
				trait = dueling_skilled
				trait = dueling_expert
				trait = dueling_master
				trait = dueling_legend
			}
		}
	}
	
	mean_time_to_happen = {
		days = 12
	}
	
	option = {
		name = "EVTOPTAsunguard.1"
		trigger = {
			any_realm_character = {
				is_female = no
				is_married = no
				age = 16
				prisoner = no
				is_ruler = no
				trait = dueling_novice
				OR = {
					trait = dueling_adept
					trait = dueling_skilled
					trait = dueling_expert
					trait = dueling_master
					trait = dueling_legend
					martial = 18
				}
			}
		}
		
		ai_chance = {
			factor = 1
		}
		
		character_event = sunguard.2
	}
}

##Fearsome Fighters##
character_event = {
	id = sunguard.2
	desc = "EVTDESCsunguard.2"
	
	is_triggered_only = yes
	
	immediate = {
		random_realm_character = {
			limit = {
				is_female = no
				is_married = no
				age = 16
				prisoner = no
				is_ruler = no
				trait = dueling_novice
				OR = {
					trait = dueling_adept
					trait = dueling_skilled
					trait = dueling_expert
					trait = dueling_master
					trait = dueling_legend
					martial = 18
				}
			}
			set_character_flag = sunguard_1
		}
		random_realm_character = {
			limit = {
				is_female = no
				is_married = no
				age = 16
				prisoner = no
				is_ruler = no
				trait = dueling_novice
				OR = {
					trait = dueling_adept
					trait = dueling_skilled
					trait = dueling_expert
					trait = dueling_master
					trait = dueling_legend
					martial = 18
				}
			}
			set_character_flag = sunguard_2
		}
		random_realm_character = {
			limit = {
				is_female = no
				is_married = no
				age = 16
				prisoner = no
				is_ruler = no
				trait = dueling_novice
				OR = {
					trait = dueling_adept
					trait = dueling_skilled
					trait = dueling_expert
					trait = dueling_master
					trait = dueling_legend
					martial = 18
				}
			}
			set_character_flag = sunguard_3
		}
	}
	
	option = {
		name = "EVTOPTAsunguard.2"
		trigger = { any_realm_character = { has_character_flag = sunguard_1 } }		
		random_realm_character = {
			limit = { has_character_flag = sunguard_1 }		
			if = {
				limit = { 
					is_primary_heir = yes 
					father = { NOT = { character = ROOT } }
				}
				character_event = { id = sunguard.3 }
			}
			if = {
				limit = { 
					OR = {
						is_primary_heir = no 
						father = { character = ROOT }
					}	
				}
				character_event = { id = sunguard.3 }
			}
		}
			hidden_tooltip = {
			any_realm_character = {
				clr_character_flag = sunguard_1	
				clr_character_flag = sunguard_2	
				clr_character_flag = sunguard_3
			}
		}
	}
	option = {
		name = "EVTOPTBsunguard.2"
		trigger = { any_realm_character = { has_character_flag = sunguard_2 } }	
		random_realm_character = {
			limit = { has_character_flag = sunguard_2 }		
			if = {
				limit = { 
					is_primary_heir = yes 
					father = { NOT = { character = ROOT } }
				}
				character_event = { id = sunguard.3 }
			}
			if = {
				limit = { 
					OR = {
						is_primary_heir = no 
						father = { character = ROOT }
					}	
				}
				character_event = { id = sunguard.3 }
			}
		}
			hidden_tooltip = {
			any_realm_character = {
				clr_character_flag = sunguard_1		
				clr_character_flag = sunguard_2
				clr_character_flag = sunguard_3
			}
		}
	}
	option = {
		name = "EVTOPTCsunguard.2"
		trigger = { any_realm_character = { has_character_flag = sunguard_3 } }		
		random_realm_character = {
			limit = { has_character_flag = sunguard_3 }		
			if = {
				limit = { 
					is_primary_heir = yes 
					father = { NOT = { character = ROOT } }
				}
				character_event = { id = sunguard.3 }
			}
			if = {
				limit = { 
					OR = {
						is_primary_heir = no 
						father = { character = ROOT }
					}	
				}
				character_event = { id = sunguard.3 }
			}
		}
			hidden_tooltip = {
			any_realm_character = {
				clr_character_flag = sunguard_1
				clr_character_flag = sunguard_2
				clr_character_flag = sunguard_3
			}
		}
	}
}
