namespace = resource_dist

# Created by Rowan
# Cleaned up and improved by making it an on_action event, blackninja9939

# If anyone has resource suggestions, feel free to introduce them into the file.

###################
### INFORMATION ###
###################
###################

# This file uses a single, on startup, event to assign modifiers to every province.

# The immediate applies all modifier by directly scoping to the provinces and then adding them.

# This allows use to quick and easily change what provinces can have what resource structures built.
# although we could handle the requirements in our resource structures themselves, it can get messy
# and overlaps can happen.

##############################
##### MODIFIER REFERENCE #####
##############################
##############################

# kingswood - provides all round buff to archers, a tiny buff to light cavalry (lances), tax income
# rainwood - provides all round buff to archers, a tiny buff to heavy cavalry (lances), tax income
# mistwood - provides all round buff to archers, a tiny buff to light infantry, tax income
# lemonwood - provides all round buff to archers, a tiny buff to light infantry, tax income
# wolfswood - provides all round buff to archers, a tiny buff to light infantry, tax income
# flint - provides a small archer and light infantry offensive bonus (a fallback weapon material), small tax income
# coal
# salt
# copper
# iron
# steel
# silver
# gold
# marble
# granite
# northern_gems
# diamonds
# obsidian
# seals
# spice
# jewellery
# precious_fabrics

#################
### THE EVENT ###
#################
#################

character_event = { 
	id = resource_dist.1
	hide_window = yes
	is_triggered_only = yes #triggered from on_startup
	
	trigger = { 
		NOT = { has_global_flag = resource_setup_complete }
		is_multiplayer_host_character = yes
	}
	
	# This block scopes directly to the provinces and assigns the resources.
	immediate = {
		set_global_flag = resource_setup_complete
        
        # Pentos
		157 = { add_province_modifier = { name = precious_fabrics duration = -1 } }
		160 = { add_province_modifier = { name = spice duration = -1 } }
		175 = { add_province_modifier = { name = salt duration = -1 } }
		190 = { add_province_modifier = { name = precious_fabrics duration = -1 } }
		
		# Myr
		241 = { add_province_modifier = { name = jewellery duration = -1 } }
		242 = { add_province_modifier = { name = spice duration = -1 } }
		247 = { add_province_modifier = { name = precious_fabrics duration = -1 } }
		
		# Tyrosh
		297 = { add_province_modifier = { name = spice duration = -1 } }
		298 = { add_province_modifier = { name = salt duration = -1 } }
		
		# Planky Town, Dorne
		444 = { add_province_modifier = { name = spice duration = -1 } }
		
		# Lemonwood
		466 = { add_province_modifier = { name = lemonwood duration = -1 } }
		467 = { add_province_modifier = { name = lemonwood duration = -1 } }
		468 = { add_province_modifier = { name = lemonwood duration = -1 } }
		469 = { add_province_modifier = { name = lemonwood duration = -1 } }
		
		475 = { add_province_modifier = { name = lemonwood duration = -1 } }
		477 = { add_province_modifier = { name = lemonwood duration = -1 } }
		
		# Salt Shore
		478 = { add_province_modifier = { name = salt duration = -1 } }
		
		# Red Mountains
		493 = { add_province_modifier = { name = salt duration = -1 } }
		
		# The Reach
		541 = { add_province_modifier = { name = precious_fabrics duration = -1 } }
		
		# Dornish Marches
		647 = { add_province_modifier = { name = iron duration = -1 } }
		650 = { add_province_modifier = { name = coal duration = -1 } }
		
		# Stormlands, Rainwood, Mistwood
		643 = { add_province_modifier = { name = steel duration = -1 } }
		
		670 = { add_province_modifier = { name = rainwood duration = -1 } }
		671 = { add_province_modifier = { name = rainwood duration = -1 } }
		672 = { add_province_modifier = { name = rainwood duration = -1 } }
		673 = { add_province_modifier = { name = rainwood duration = -1 } }
		
		674 = { add_province_modifier = { name = mistwood duration = -1 } }
		675 = { add_province_modifier = { name = mistwood duration = -1 } }
		676 = { add_province_modifier = { name = mistwood duration = -1 } }
		677 = { add_province_modifier = { name = mistwood duration = -1 } }
		678 = { add_province_modifier = { name = mistwood duration = -1 } }
		
		679 = { add_province_modifier = { name = rainwood duration = -1 } }
		680 = { add_province_modifier = { name = rainwood duration = -1 } }
		681 = { add_province_modifier = { name = rainwood duration = -1 } }
		682 = { add_province_modifier = { name = rainwood duration = -1 } }
		683 = { add_province_modifier = { name = rainwood duration = -1 } }
		
		# Blackwater Bay
		733 = { add_province_modifier = { name = jewellery duration = -1 } }
		
		# Kingswood, Crownlands/Dusklands/Wendwater
		749 = { add_province_modifier = { name = kingswood duration = -1 } }
		750 = { add_province_modifier = { name = kingswood duration = -1 } }
		751 = { add_province_modifier = { name = kingswood duration = -1 } }
		752 = { add_province_modifier = { name = kingswood duration = -1 } }
		753 = { add_province_modifier = { name = kingswood duration = -1 } }
		
		# Dragonstone - Volcanic activity, good source of both obsidian and diamonds and very good to actually hold.
		797 = { add_province_modifier = { name = obsidian duration = -1 } add_province_modifier = { name = diamonds duration = -1 } }
		798 = { add_province_modifier = { name = obsidian duration = -1 } }
		799 = { add_province_modifier = { name = diamonds duration = -1 } }
		800 = { add_province_modifier = { name = obsidian duration = -1 } }
        
        # Dirtmark - Spicetown
        801 = { add_province_modifier = { name = spice duration = -1 } }
		
		# Casterly Rock
		858 = { add_province_modifier = { name = jewellery duration = -1 } }
		
		# The Westerlands
		885 = { add_province_modifier = { name = iron duration = -1 } }
		889 = { add_province_modifier = { name = silver duration = -1 } }
		891 = { add_province_modifier = { name = gold duration = -1 } }
		894 = { add_province_modifier = { name = silver duration = -1 } }
		896 = { add_province_modifier = { name = salt duration = -1 } }
		
		907 = { add_province_modifier = { name = gold duration = -1 } }
		911 = { add_province_modifier = { name = gold duration = -1 } }
		929 = { add_province_modifier = { name = copper duration = -1 } }
		930 = { add_province_modifier = { name = copper duration = -1 } }
		946 = { add_province_modifier = { name = gold duration = -1 } }
		952 = { add_province_modifier = { name = coal duration = -1 } }
		954 = { add_province_modifier = { name = silver duration = -1 } }
		956 = { add_province_modifier = { name = coal duration = -1 } }
		957 = { add_province_modifier = { name = silver duration = -1 } }
		
		# Iron Islands
		1156 = { add_province_modifier = { name = iron duration = -1 } }
		1157 = { add_province_modifier = { name = iron duration = -1 } }
		1165 = { add_province_modifier = { name = copper duration = -1 } }
		1166 = { add_province_modifier = { name = granite duration = -1 } }
		1175 = { add_province_modifier = { name = granite duration = -1 } }
		1176 = { add_province_modifier = { name = iron duration = -1 } }
		1178 = { add_province_modifier = { name = silver duration = -1 } }
		1190 = { add_province_modifier = { name = iron duration = -1 } }
		
		# Wolfswood, North
		1194 = { add_province_modifier = { name = wolfswood duration = -1 } }
		1195 = { add_province_modifier = { name = wolfswood duration = -1 } }
		1235 = { add_province_modifier = { name = wolfswood duration = -1 } }
		1243 = { add_province_modifier = { name = wolfswood duration = -1 } }
		1244 = { add_province_modifier = { name = wolfswood duration = -1 } }
		1245 = { add_province_modifier = { name = wolfswood duration = -1 } }
		1246 = { add_province_modifier = { name = wolfswood duration = -1 } }
		1248 = { add_province_modifier = { name = wolfswood duration = -1 } }
		1252 = { add_province_modifier = { name = wolfswood duration = -1 } }
		1256 = { add_province_modifier = { name = wolfswood duration = -1 } }
		
		# Northern Clans - A good source of uncut gemstones. To fully exploit the duchy, they must feudalise
		1229 = { add_province_modifier = { name = northern_gems duration = -1 } }
		1231 = { add_province_modifier = { name = northern_gems duration = -1 } }
		1232 = { add_province_modifier = { name = northern_gems duration = -1 } }
		1233 = { add_province_modifier = { name = northern_gems duration = -1 } }
		
		# The Vale
		1070 = { add_province_modifier = { name = marble duration = -1 } }
		1072 = { add_province_modifier = { name = precious_fabrics duration = -1 } }
		1077 = { add_province_modifier = { name = copper duration = -1 } }
		1084 = { add_province_modifier = { name = steel duration = -1 } }
		1091 = { add_province_modifier = { name = coal duration = -1 } }
		1092 = { add_province_modifier = { name = granite duration = -1 } }
		1098 = { add_province_modifier = { name = coal duration = -1 } }
		1099 = { add_province_modifier = { name = granite duration = -1 } }
		1105 = { add_province_modifier = { name = marble duration = -1 } }
		1114 = { add_province_modifier = { name = copper duration = -1 } }
		1116 = { add_province_modifier = { name = granite duration = -1 } }
		1138 = { add_province_modifier = { name = granite duration = -1 } }
		1141 = { add_province_modifier = { name = silver duration = -1 } }
		1142 = { add_province_modifier = { name = iron duration = -1 } }
		
		# The North
		
		1204 = { add_province_modifier = { name = silver duration = -1 } }
		
		1215 = { add_province_modifier = { name = seals duration = -1 } }
		1217 = { add_province_modifier = { name = seals duration = -1 } }
		1218 = { add_province_modifier = { name = seals duration = -1 } }
		1219 = { add_province_modifier = { name = seals duration = -1 } }
		1227 = { add_province_modifier = { name = seals duration = -1 } }
		
		# Bear Island
		1240 = { add_province_modifier = { name = seals duration = -1 } }
		1242 = { add_province_modifier = { name = seals duration = -1 } }
		
		# Skagos
		1288 = { add_province_modifier = { name = seals duration = -1 } }
		1293 = { add_province_modifier = { name = seals duration = -1 } }
        
        ##### OTHER NON-RESOURCE STATIC PROVINCE AFFECTING MODIFIERS #####
        
        # Desolate - Increases build cost and build time
        # Ravaged - Increases build cost and build time
        
        # Dragonstone
        797 = { add_province_modifier = { name = tsk_desolate duration = -1 } }
		798 = { add_province_modifier = { name = tsk_desolate duration = -1 } }
		799 = { add_province_modifier = { name = tsk_desolate duration = -1 } }
		800 = { add_province_modifier = { name = tsk_desolate duration = -1 } }
        
        # Lorath, ravaged by war
        65 = { add_province_modifier = { name = tsk_ravaged duration = -1 } }
        67 = { add_province_modifier = { name = tsk_ravaged duration = -1 } }
        
        # These might be a bit much.
        if = {
            limit = {
                terrain = desert
            }
            random = {
                50 = { add_province_modifier = { name = tsk_bleak duration = -1 } }
                50 = { }
            }
        }
        if = {
            limit = {
                OR = {
                    terrain = plains
                    terrain = farmlands
                    
                }
            }
            random = {
                10 = { add_province_modifier = { name = tsk_fruitful duration = -1 } }
                90 = { }
            }
        }
        if = {
            limit = {
                terrain = barrens
            }
            random = {
                30 = { add_province_modifier = { name = tsk_bleak duration = -1 } }
                60 = { add_province_modifier = { name = tsk_desolate duration = -1 } }
                10 = { }
            }
        }
	}
}
