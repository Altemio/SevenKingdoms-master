#Visitin the Marketplace
#By Stroopwaffel

decisions = {

	visit_market = {
		from_potential = {
			is_playable = yes
			#ai = no

			#IMPORTANT!
			#Don't forget to add any additional vendors you have added to this!
			
			NOT = {
				has_character_flag = visited_armorsmith
				has_character_flag = visited_generalgoods
				has_character_flag = visited_jeweler
				has_character_flag = visited_weaponsmith
			}
		}
		
		allow = {
			min_age = 16
		}
		
		effect = {
			set_character_flag = visited_market
		}
	}

	##### Start of Weaponsmith Decisions ######

		visit_weaponsmith = {
			from_potential = {
				has_character_flag = visited_market
			
			#IMPORTANT!
			#Don't forget to add any additional vendors you have added to this!
			
				NOT =  {
					vendor_checkmainflags = yes
					}
			}
		
			allow = {
				min_age = 16
			}
		
			effect = {
				set_character_flag = visited_weaponsmith
			}
		}
		
			inspect_swords = {
				from_potential = {
					has_character_flag = visited_weaponsmith
					
					NOT = {
						has_character_flag = inspected_swords
						has_character_flag = inspected_
						has_character_flag = inspected_
					}
				}
				
				allow = {
					min_age = 16
				}
				
				effect = {
					set_character_flag = inspected_swords
				}
			}
			
			inspect_

	##### End of Weaponsmith Decisions ######

	##### Start of Armorsmith Decisions ######

		visit_armorsmith = {
			from_potential = {
				has_character_flag = visited_market
			
			#IMPORTANT!
			#Don't forget to add any additional vendors you have added to this!
			
				NOT =  {
					has_character_flag = visited_armorsmith
					has_character_flag = visited_generalgoods
					has_character_flag = visited_jeweler
					has_character_flag = visited_weaponsmith
				}
			}
		
			allow = {
				min_age = 16
			}
		
			effect = {
				set_character_flag = visited_armorsmith
			}
		}
		
	##### End of Armorsmith Decisions ######

	##### Start of Jeweler Decisions ######

		visit_jeweler = {
			from_potential = {
				has_character_flag = visited_market
			
			#IMPORTANT!
			#Don't forget to add any additional vendors you have added to this!
			
				NOT =  { 
					has_character_flag = visited_armorsmith
					has_character_flag = visited_generalgoods
					has_character_flag = visited_jeweler
					has_character_flag = visited_weaponsmith
				}
			}
		
			allow = {
				min_age = 16
			}
		
			effect = {
				set_character_flag = visited_jeweler
			}
		}

	##### End of Jeweler Decisions ######

	##### Start of General Goods Decisions ######

		visit_generalgoods = {
			from_potential = {
				has_character_flag = visited_market
			
			#IMPORTANT!
			#Don't forget to add any additional vendors you have added to this list!
			
				NOT =  { 
					has_character_flag = visited_armorsmith
					has_character_flag = visited_generalgoods
					has_character_flag = visited_jeweler
					has_character_flag = visited_weaponsmith
				}
			}
		
			allow = {
				min_age = 16
			}
		
			effect = {
				set_character_flag = visited_generalgoods
			}
		}

	##### End of General Goods Decisions ######

	leave_market = {
		from_potential = {
			has_character_flag = visited_market
			
			#IMPORTANT!
			#Don't forget to add any additional vendors you have added to this!
			
			NOT =  { 
				has_character_flag = visited_armorsmith
				has_character_flag = visited_jeweler
				has_character_flag = visited_weaponsmith
				has_character_flag = visited_generalgoods
			}
		}

		allow = {
			min_age = 16
		}
		
		#IMPORTANT!
		#Don't forget to add any flags you added, so that they get cleared!
		
		effect = {
			clr_character_flag = visited_market
			clr_character_flag = visited_armorsmith
			clr_character_flag = visited_jeweler
			clr_character_flag = visited_weaponsmith
			clr_character_flag = visited_generalgoods
			clr_character_flag = inspected_swords
			clr_character_flag = 
		}
	}
}